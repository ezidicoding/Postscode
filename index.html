<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>إرسال مقالة للنشر</title>
<style>
body {
  font-family: Tahoma, sans-serif;
  background: #f2f2f2;
  padding: 20px;
}
.post-box {
  max-width: 650px;
  margin: 40px auto;
  padding: 25px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
</style>
</head>

<body>

<!-- iframe مخفي للإرسال -->
<iframe name="hiddenFrame" style="display:none;"></iframe>

<div class="post-box">
  <h2>إرسال مقالة للنشر</h2>

  <form id="guestPostForm">
    <input type="text" id="title" placeholder="عنوان المقال" required>
    <input type="text" id="author" placeholder="اسم الكاتب (اختياري)">
    <textarea id="content" rows="8" placeholder="اكتب المقال هنا..." required></textarea>
    <button type="submit">إرسال المقال</button>
    <div id="result"></div>
  </form>
</div>

<script>
document.getElementById("guestPostForm").addEventListener("submit", function(e){
  e.preventDefault();

  const title = document.getElementById("title").value;
  const author = document.getElementById("author").value;
  const content = document.getElementById("content").value;

  if(!title || !content){
    alert("يرجى ملء الحقول المطلوبة");
    return;
  }

  const form = document.createElement("form");
  form.action = "https://formsubmit.co/send.shamo.post2025@blogger.com";
  form.method = "POST";
  form.target = "hiddenFrame";   // ← أهم خطوة!

  const fields = {
    _subject: "مقال جديد من النموذج",
    _captcha: "false",
    _template: "table",
    العنوان: title,
    الكاتب: author,
    المحتوى: content,
    _next: "https://eclrsg.blogspot.com/?m=1"  // لن يتم فتحها؛ لأننا نستخدم iframe
  };

  for (let name in fields){
    const input = document.createElement("input");
    input.type = "hidden";
    input.name = name;
    input.value = fields[name];
    form.appendChild(input);
  }

  document.body.appendChild(form);
  form.submit();

  // رسالة نجاح على نفس الصفحة
  document.getElementById("result").textContent = "✓ تم إرسال المقال بنجاح دون مغادرة الصفحة";
});
</script>
